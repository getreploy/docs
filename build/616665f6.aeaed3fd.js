(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{106:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return c})),a.d(t,"metadata",(function(){return l})),a.d(t,"rightToc",(function(){return i})),a.d(t,"default",(function(){return p}));var n=a(1),r=a(7),o=(a(0),a(120)),c={id:"doc3",title:"Set up a Project (reploy.yml)"},l={id:"doc3",title:"Set up a Project (reploy.yml)",description:"## Get the Reploy project's ID",source:"@site/docs/doc3.md",permalink:"/docs/doc3",editUrl:"https://github.com/getreploy/docs/edit/master/website/docs/doc3.md",sidebar:"someSidebar",previous:{title:"Getting started with Reploy",permalink:"/docs/doc2"}},i=[{value:"Get the Reploy project&#39;s ID",id:"get-the-reploy-projects-id",children:[]},{value:"Structure",id:"structure",children:[]},{value:"Sample reploy.yml",id:"sample-reployyml",children:[]}],b={rightToc:i};function p(e){var t=e.components,a=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(n.a)({},b,a,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h2",{id:"get-the-reploy-projects-id"},"Get the Reploy project's ID"),Object(o.b)("p",null,"Before we define the ",Object(o.b)("inlineCode",{parentName:"p"},"reploy.yml")," file in the project's root directory, you'll will need to create a Reploy project online on the web app and get it's ID."),Object(o.b)("h2",{id:"structure"},"Structure"),Object(o.b)("p",null,"A ",Object(o.b)("inlineCode",{parentName:"p"},"reploy.yml")," is a YAML file placed in the project's root directory and is used to configure a Reploy project (including its corresponding services and dependencies). To maintain familiarity, it is similar to docker compose in structure."),Object(o.b)("p",null,"A full sample is in the next section but here's a brief example:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-yaml"}),"id: yougetthisfromthewebapp\nservices:\n  service-name: #name of the service\n    relative-path: ./backend #this service will be used for all commands being executed in any sub-directory of `backend`\n    port: 0000 # port that needs to be exposed\n    port-forward: true # port-forwarding to your local machine\n    image: dockerhub.com/image #link to the docker image\n    environment: # environment variables\n      KEY: 'val'\n    secret:\n      - SECRET_KEY # value stored in reploy's web app\n")),Object(o.b)("p",null,"The various aspects of a service are"),Object(o.b)("table",null,Object(o.b)("thead",{parentName:"table"},Object(o.b)("tr",{parentName:"thead"},Object(o.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Name"),Object(o.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Default Value"),Object(o.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Comments"))),Object(o.b)("tbody",{parentName:"table"},Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"service-name"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"REQUIRED"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"User defined name of the service e.g. ",Object(o.b)("inlineCode",{parentName:"td"},"frontend"),", ",Object(o.b)("inlineCode",{parentName:"td"},"cache"),", ",Object(o.b)("inlineCode",{parentName:"td"},"database"))),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"image"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"REQUIRED"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Link to the docker image")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"relative-path"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"OPTIONAL"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Reploy commands executed in any sub-directories of this path will use this service")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"port"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"OPTIONAL"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Port that the service uses and needs to be exposed")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"environment"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"OPTIONAL"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"A list of environment variables accessible by the service")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"secret"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"OPTIONAL"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"A list of secrets accessible by the service. the values of these secrets are defined in the web app")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"port-forward"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"false"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Decides whether to port-forward to your local machine")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"bypass-sync"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"false"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Decouples syncing of file state with command execution i.e. decides whether to wait for file sync to finish before executing commands. can be true for services like cache and databases which do not have an associated file state.")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"ignore-all-args"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"false"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"When false, we pass default args to the docker container to keep it alive. however, if you'd like for us to not send any args to the docker container to prevent overriding any args you might have specified, turn this off.")))),Object(o.b)("h2",{id:"sample-reployyml"},"Sample reploy.yml"),Object(o.b)("p",null,"Consider a sample directory tree for a project"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{}),"project_root # root directory of your project (home of the .git directory)\n\u251c\u2500\u2500 web-backend\n\u2502   \u2514\u2500\u2500 main.go\n\u251c\u2500\u2500 web-frontend\n\u2502   \u2514\u2500\u2500 package.json\n\u2502   \u2514\u2500\u2500 main.js\n\u251c\u2500\u2500 ...\n")),Object(o.b)("p",null,"and its corresponding ",Object(o.b)("inlineCode",{parentName:"p"},"reploy.yml")," file"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-yaml"}),"id: yougetthisfromthewebapp\nservices:\n  web-backend:\n    relative-path: ./web-backend\n    port: 8080\n    port-forward: true\n    image: gcr.io/himank-jay/polyglott-go:v1\n    environment:\n      PSQL_PASSWORD: 'postgres'\n      PSQL_USER: 'default'\n      PSQL_HOST: '0.0.0.0'\n  database:\n    port: 5432\n    port-forward: true\n    bypass-sync: true\n    ignore-all-args: true\n    image: gcr.io/himank-jay/postgres:v1\n    environment:\n      POSTGRES_PASSWORD: 'postgres'\n      POSTGRES_USER: 'default'\n  cache:\n    port: 6379\n    port-forward: true\n    bypass-sync: true\n    ignore-all-args: true\n    image: gcr.io/himank-jay/redis:v1\n  web-frontend:\n    port: 3000\n    port-forward: true\n    relative-path: ./web-frontend\n    image: gcr.io/himank-jay/polyglott-nodejs:v1\n    environment:\n      CHOKIDAR_USEPOLLING: true\n    secrets:\n      - REACT_APP_FIREBASE_API_KEY\n      - REACT_APP_FIREBASE_AUTH_DOMAIN\n      - REACT_APP_FIREBASE_DATABASE_URL\n      - REACT_APP_BACKEND_URL\n")))}p.isMDXComponent=!0}}]);